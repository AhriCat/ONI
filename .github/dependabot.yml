# .github/dependabot.yml
# ---------------------------------------------------------
# Dependabot configuration – multi‑ecosystem group
# ---------------------------------------------------------
version: 2

# ------------------------------------------------------------------
# 1️⃣  Python (pip) – 90 % of the codebase
# ------------------------------------------------------------------
updates:
  - package-ecosystem: "pip"                     # Python packages (requirements.txt, Pipfile, pyproject.toml)
    directory: "oni/"                               # Root of the repository – adjust if you keep deps elsewhere
    schedule:
      interval: "daily"                          # Check for updates every day
      time: "04:00"                              # Optional – run at 4 am UTC
    open-pull-requests-limit: 5
    groups:
      # All Python updates will be combined with the other ecosystems
      multi-ecosystem:
        patterns:
          - "*"                                 # Match every Python dependency

# ------------------------------------------------------------------
# 2️⃣  Node.js (npm) – TypeScript, JavaScript, Solidity (npm‑based tooling)
# ------------------------------------------------------------------
  - package-ecosystem: "npm"                     # npm / Yarn / pnpm lockfiles
    directory: "oni/"                               # Adjust if you keep a separate “frontend/” folder
    schedule:
      interval: "daily"
      time: "04:30"
    open-pull-requests-limit: 5
    groups:
      multi-ecosystem:
        patterns:
          - "*"                                 # Match every npm dependency

# ------------------------------------------------------------------
# 3️⃣  GitHub Actions – workflows used by Jupyter notebooks, CI, etc.
# ------------------------------------------------------------------
  - package-ecosystem: "github-actions"
    directory: "oni/"                               # Looks for .github/workflows/*.yml
    schedule:
      interval: "weekly"
      day: "monday"
      time: "05:00"
    open-pull-requests-limit: 3
    groups:
      multi-ecosystem:
        patterns:
          - "*"                                 # Match every GH‑Actions version bump

# ------------------------------------------------------------------
# Optional: Add a generic “Other” catch‑all for any future ecosystem
# ------------------------------------------------------------------
  - package-ecosystem: "bundler"                 # Example for Ruby gems – remove if you don’t use it
    directory: "oni/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 2
    groups:
      multi-ecosystem:
        patterns:
          - "*"                                 # Keeps the group universal

# ------------------------------------------------------------------
# Global settings (apply to every update block)
# ------------------------------------------------------------------
registries: {}          # Add private registries here if needed
allow:
  - dependency-type: "all"   # Accept both direct & transitive updates
